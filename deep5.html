<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Happy Deepawali</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body,html{height:100%;width:100%;overflow:hidden;font-family:Arial,Helvetica,sans-serif;background:#000;color:#fff}

    canvas#fireworks{position:fixed;top:0;left:0;width:100%;height:100%;z-index:0}

    header{position:fixed;top:10px;width:100%;text-align:center;z-index:5;font-size:0.9rem;color:white;opacity:0.85}

    .center-content{
      position:fixed;top:50%;left:50%;
      transform:translate(-50%,-50%);
      text-align:center;z-index:3;width:90%;
      display:flex;flex-direction:column;align-items:center;
      gap:12px;
    }
    .center-content img{max-width:300px;width:100%}
    .slogan{
      font-size:2rem;font-weight:bold;color:#fff;
      text-shadow:0 0 10px #ff0,0 0 20px #f0f,0 0 30px #0ff;
      animation:pop 2s infinite alternate;letter-spacing:2px;
    }
    @keyframes pop{from{transform:scale(1)}to{transform:scale(1.1)}}

    .wishes h1{font-size:1.2rem;margin-bottom:0.2rem;opacity:0.9}
    .wishes h2{font-size:1.85rem;text-transform:uppercase}

    /* Floating share button at bottom */
    .share-container{
      position:fixed;bottom:10px;left:50%;
      transform:translateX(-50%);
      text-align:center;z-index:5;width:90%;
    }
    .share-btn{
      background:#ff9800;color:#000;font-weight:bold;
      padding:12px 20px;border:none;border-radius:30px;
      cursor:pointer;font-size:1rem;width:100%;
    }
    .name-box{
      margin-top:10px;display:none;
    }
    .name-box input{
      width:100%;padding:8px;border-radius:6px;border:1px solid #ccc;margin-bottom:8px;
    }
    .generate-btn{
      background:#4caf50;color:#fff;font-weight:bold;
      padding:10px 15px;border:none;border-radius:20px;
      cursor:pointer;width:100%;
    }
    .link-box{
      margin-top:5px;font-size:0.8rem;color:yellow;word-break:break-all;
    }

    @media(min-width:768px){
      .slogan{font-size:3rem}
      .wishes h1{font-size:1.5rem}
      .wishes h2{font-size:2.3rem}
      .center-content img{max-width:400px}
    }
  </style>
</head>
<body>
  <canvas id="fireworks"></canvas>
  <header>Created by VANI GRAPHICS</header>

  <div class="center-content">
    <img src="overlay.png" alt="Overlay">
    <div class="slogan">HAPPY DEEPAWALI</div>
    <div class="wishes">
      <h1>Best Wishes From,</h1>
      <h2 id="footerName">GAJENDRA TANWAR & FAMILY</h2>
    </div>
  </div>

  <!-- Floating Share Button -->
  <div class="share-container">
    <button class="share-btn" onclick="toggleBox()">Share with your name</button>
    <div class="name-box" id="nameBox">
      <input type="text" id="nameInput" placeholder="Your Name">
      <button class="generate-btn" onclick="generateAndShare()">Generate & Share</button>
      <div class="link-box" id="generatedLink"></div>
    </div>
  </div>

  <script>
    // --- Fireworks Animation ---
    (function(){
      const canvas = document.getElementById('fireworks');
      const ctx = canvas.getContext('2d');
      let W = canvas.width = innerWidth;
      let H = canvas.height = innerHeight;
      const fireworks = [];
      const particles = [];

      function rand(min,max){ return Math.random()*(max-min)+min }
      function hsvToRgb(h,s,v){
        let c=v*s, x=c*(1-Math.abs((h/60)%2-1)), m=v-c;
        let r=0,g=0,b=0;
        if(h<60){r=c;g=x;b=0}
        else if(h<120){r=x;g=c;b=0}
        else if(h<180){r=0;g=c;b=x}
        else if(h<240){r=0;g=x;b=c}
        else if(h<300){r=x;g=0;b=c}
        else {r=c;g=0;b=x}
        return `rgb(${Math.round((r+m)*255)},${Math.round((g+m)*255)},${Math.round((b+m)*255)})`;
      }

      class Firework{
        constructor(){
          this.x = rand(W*0.1, W*0.9);
          this.y = H + rand(10,60);
          this.targetY = rand(H*0.12, H*0.5);
          this.speed = rand(5,9);
          this.size = rand(2,3.5);
          this.hue = rand(0,360);
          this.trail = [];
        }
        update(){
          this.trail.push({x:this.x,y:this.y});
          if(this.trail.length>8) this.trail.shift();
          this.y -= this.speed;
          this.speed *= 0.995;
          if(this.y <= this.targetY){ this.explode(); return false; }
          return true;
        }
        draw(){
          for(let i=0;i<this.trail.length;i++){
            const p=this.trail[i];
            const alpha = (i+1)/this.trail.length;
            ctx.beginPath();
            ctx.fillStyle = `rgba(255, 220, 120, ${alpha*0.8})`;
            ctx.arc(p.x,p.y, this.size* (0.6 + alpha*0.8), 0, Math.PI*2);
            ctx.fill();
          }
          ctx.beginPath();
          ctx.fillStyle = `rgba(255,255,255,0.9)`;
          ctx.arc(this.x,this.y,this.size*1.1,0,Math.PI*2);
          ctx.fill();
        }
        explode(){
          const count = Math.floor(rand(30,110));
          const hue = this.hue;
          for(let i=0;i<count;i++){
            const angle = Math.random()*Math.PI*2;
            const speed = rand(1.8,6.5) * (Math.random()<0.6?1:1.6);
            particles.push(new Particle(this.x,this.y,angle,speed,hue));
          }
        }
      }

      class Particle{
        constructor(x,y,angle,speed,hue){
          this.x=x; this.y=y;
          this.vx=Math.cos(angle)*speed;
          this.vy=Math.sin(angle)*speed;
          this.life = 80 + Math.random()*80;
          this.age = 0;
          this.hue = (hue + rand(-30,30) + 360) % 360;
          this.size = rand(1,2.8);
          this.decay = rand(0.96,0.993);
          this.gravity = 0.04 + Math.random()*0.06;
          this.alpha = 1;
        }
        update(){
          this.vy += this.gravity;
          this.vx *= 0.998;
          this.vy *= 0.998;
          this.x += this.vx;
          this.y += this.vy;
          this.age++;
          this.alpha *= (this.decay);
          if(this.age > this.life) this.alpha -= 0.02;
          return this.alpha>0.02;
        }
        draw(){
          ctx.beginPath();
          const c = hsvToRgb(this.hue, 0.9, 1);
          ctx.fillStyle = c.replace('rgb','rgba').replace(')', `, ${Math.max(0.02, this.alpha)})`);
          ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
          ctx.fill();
        }
      }

      function loop(){
        requestAnimationFrame(loop);
        ctx.globalCompositeOperation = 'source-over';
        ctx.fillStyle = 'rgba(4,4,8,0.22)';
        ctx.fillRect(0,0,W,H);

        if(Math.random()<0.04){
          const x = Math.random()*W, y=Math.random()*H*0.6;
          ctx.beginPath(); ctx.fillStyle='rgba(255,255,255,0.02)'; ctx.arc(x,y,rand(1,3),0,Math.PI*2); ctx.fill();
        }

        for(let i=fireworks.length-1;i>=0;i--){
          const f=fireworks[i];
          if(!f.update()) fireworks.splice(i,1);
          else f.draw();
        }
        for(let i=particles.length-1;i>=0;i--){
          const p=particles[i];
          if(!p.update()) particles.splice(i,1);
          else p.draw();
        }

        if(Math.random() < 0.06) fireworks.push(new Firework());
        if(Math.random() < 0.01) fireworks.push(new Firework());
        if(particles.length>1200){ particles.splice(0, particles.length-900); }
      }

      window.addEventListener('resize', ()=>{ W = canvas.width = innerWidth; H = canvas.height = innerHeight; });
      for(let i=0;i<4;i++) fireworks.push(new Firework());
      loop();
    })();

    // --- Dynamic Name & Sharing ---
    const footerName=document.getElementById("footerName");
    const nameInput=document.getElementById("nameInput");
    const generatedLink=document.getElementById("generatedLink");

    function getParam(name){
      const url=new URL(window.location.href);
      return url.searchParams.get(name);
    }
    function updateFooter(name){ if(name){ footerName.textContent=name.toUpperCase(); } }

    const paramName=getParam("name");
    if(paramName){ updateFooter(paramName); nameInput.value=paramName; }

    nameInput.addEventListener("input",e=>{
      updateFooter(e.target.value);
    });

    function toggleBox(){
      const box=document.getElementById("nameBox");
      box.style.display = (box.style.display==="block")?"none":"block";
    }

    function generateAndShare(){
      const val=nameInput.value.trim()||"GAJENDRA TANWAR & FAMILY";
      updateFooter(val);
      const url=window.location.origin+window.location.pathname+"?name="+encodeURIComponent(val);
      generatedLink.textContent=url;
      const msg=`âœ¨ðŸŽ† HAPPY DEEPAWALI ðŸŽ†âœ¨\nBest wishes from ${val}\n${url}`;
      window.open("https://wa.me/?text="+encodeURIComponent(msg),"_blank");
    }
  </script>
</body>
</html>
